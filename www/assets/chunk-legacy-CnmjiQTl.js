System.register([],function(e,t){"use strict";return{execute:function(){const t=e("_",function(e,t,n){let i=Promise.resolve();function o(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return i.then(t=>{for(const e of t||[])"rejected"===e.status&&o(e.reason);return e().catch(o)})}),n=(e=>e.CapacitorPlatforms=(e=>{const t=new Map;t.set("web",{name:"web"});const n=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t};return n.addPlatform=(e,t)=>{n.platforms.set(e,t)},n.setPlatform=e=>{n.platforms.has(e)&&(n.currentPlatform=n.platforms.get(e))},n})(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:{});var i,o;n.addPlatform,n.setPlatform,(o=i||(i={})).Unimplemented="UNIMPLEMENTED",o.Unavailable="UNAVAILABLE";class a extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const s=e=>{var t,n,o,s,r;const l=e.CapacitorCustomPlatform||null,c=e.Capacitor||{},d=c.Plugins=c.Plugins||{},u=e.CapacitorPlatforms,p=(null===(t=null==u?void 0:u.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==l?l.name:(e=>{var t,n;return(null==e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e)),m=(null===(n=null==u?void 0:u.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||(()=>"web"!==p()),h=(null===(o=null==u?void 0:u.currentPlatform)||void 0===o?void 0:o.isPluginAvailable)||(e=>{const t=w.get(e);return!!(null==t?void 0:t.platforms.has(p()))||!!g(e)}),g=(null===(s=null==u?void 0:u.currentPlatform)||void 0===s?void 0:s.getPluginHeader)||(e=>{var t;return null===(t=c.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)}),w=new Map,f=(null===(r=null==u?void 0:u.currentPlatform)||void 0===r?void 0:r.registerPlugin)||((e,t={})=>{const n=w.get(e);if(n)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),n.proxy;const o=p(),s=g(e);let r;const u=n=>{let d;const u=(...u)=>{const p=(async()=>(!r&&o in t?r=r="function"==typeof t[o]?await t[o]():t[o]:null!==l&&!r&&"web"in t&&(r=r="function"==typeof t.web?await t.web():t.web),r))().then(t=>{const r=((t,n)=>{var r,l;if(!s){if(t)return null===(l=t[n])||void 0===l?void 0:l.bind(t);throw new a(`"${e}" plugin is not implemented on ${o}`,i.Unimplemented)}{const i=null==s?void 0:s.methods.find(e=>n===e.name);if(i)return"promise"===i.rtype?t=>c.nativePromise(e,n.toString(),t):(t,i)=>c.nativeCallback(e,n.toString(),t,i);if(t)return null===(r=t[n])||void 0===r?void 0:r.bind(t)}})(t,n);if(r){const e=r(...u);return d=null==e?void 0:e.remove,e}throw new a(`"${e}.${n}()" is not implemented on ${o}`,i.Unimplemented)});return"addListener"===n&&(p.remove=async()=>d()),p};return u.toString=()=>`${n.toString()}() { [capacitor code] }`,Object.defineProperty(u,"name",{value:n,writable:!1,configurable:!1}),u},m=u("addListener"),h=u("removeListener"),f=(e,t)=>{const n=m({eventName:e},t),i=async()=>{const i=await n;h({eventName:e,callbackId:i},t)},o=new Promise(e=>n.then(()=>e({remove:i})));return o.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await i()},o},v=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return s?f:m;case"removeListener":return h;default:return u(t)}}});return d[e]=v,w.set(e,{name:e,proxy:v,platforms:new Set([...Object.keys(t),...s?[o]:[]])}),v});return c.convertFileSrc||(c.convertFileSrc=e=>e),c.getPlatform=p,c.handleError=t=>e.console.error(t),c.isNativePlatform=m,c.isPluginAvailable=h,c.pluginMethodNoop=(e,t,n)=>Promise.reject(`${n} does not have an implementation of "${t}".`),c.registerPlugin=f,c.Exception=a,c.DEBUG=!!c.DEBUG,c.isLoggingEnabled=!!c.isLoggingEnabled,c.platform=c.getPlatform(),c.isNative=c.isNativePlatform(),c},r=(e=>e.Capacitor=s(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:{}),l=r.registerPlugin;r.Plugins;class c{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const i=this.windowListeners[e];return i&&!i.registered&&this.addWindowListener(i),n&&this.sendRetainedArgumentsForEvent(e),Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const i=this.listeners[e];if(i)i.forEach(e=>e(t));else if(n){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new r.Exception(e,i.Unimplemented)}unavailable(e="not available"){return new r.Exception(e,i.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const i=n.indexOf(t);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}const d=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),u=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class p extends c{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[n,i]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=u(n).trim(),i=u(i).trim(),t[n]=i}),t}async setCookie(e){try{const t=d(e.key),n=d(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),a=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${n||""}${i}; path=${o}; ${a};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}l("CapacitorCookies",{web:()=>new p});const m=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),i=((e={})=>{const t=Object.keys(e);return Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((n,i,o)=>(n[i]=e[t[o]],n),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)n.body=e.data;else if(i.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[n,i]of Object.entries(e.data||{}))t.set(n,i);n.body=t.toString()}else if(i.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,n)=>{t.append(n,e)});else for(const n of Object.keys(e.data))t.append(n,e.data[n]);n.body=t;const i=new Headers(n.headers);i.delete("content-type"),n.headers=i}else(i.includes("application/json")||"object"==typeof e.data)&&(n.body=JSON.stringify(e.data));return n};class h extends c{async request(e){const t=m(e,e.webFetchExtra),n=((e,t=!0)=>e?Object.entries(e).reduce((e,n)=>{const[i,o]=n;let a,s;return Array.isArray(o)?(s="",o.forEach(e=>{a=t?encodeURIComponent(e):e,s+=`${i}=${a}&`}),s.slice(0,-1)):(a=t?encodeURIComponent(o):o,s=`${i}=${a}`),`${e}&${s}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),i=n?`${e.url}?${n}`:e.url,o=await fetch(i,t),a=o.headers.get("content-type")||"";let s,r,{responseType:l="text"}=o.ok?e:{};switch(a.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":r=await o.blob(),s=await(async e=>new Promise((t,n)=>{const i=new FileReader;i.onload=()=>{const e=i.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},i.onerror=e=>n(e),i.readAsDataURL(e)}))(r);break;case"json":s=await o.json();break;default:s=await o.text()}const c={};return o.headers.forEach((e,t)=>{c[t]=e}),{data:s,headers:c,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}l("CapacitorHttp",{web:()=>new h});const g=l("SplashScreen",{web:()=>t(()=>Promise.resolve().then(()=>y),void 0).then(e=>new e.SplashScreenWeb)});var w,f;!function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"}(w||(w={})),function(e){e.None="NONE",e.Slide="SLIDE",e.Fade="FADE"}(f||(f={}));const v=l("StatusBar");window.mobileManager=null;const b=Object.freeze(Object.defineProperty({__proto__:null,MobileManager:class{constructor(){this.platform=r.getPlatform(),this.isNative=r.isNativePlatform(),this.isInitialized=!1,this.backgroundMode=!1,this.pushNotifications=!1,this.hapticFeedback=!1,console.log(`📱 Mobile manager initialized for platform: ${this.platform}`)}async initialize(){if(this.isNative){console.log("📱 Initializing mobile features...");try{await this.configureStatusBar(),await this.hideSplashScreen(),this.setupMobileUI(),this.setupAppLifecycle(),this.setupHardwareBackButton(),this.isInitialized=!0,console.log("✅ Mobile features initialized")}catch(e){throw console.error("❌ Failed to initialize mobile features:",e),e}}else console.log("📱 Running in web mode, skipping native features")}async configureStatusBar(){try{await v.setStyle({style:w.Dark}),await v.setBackgroundColor({color:"#0f1419"}),await v.show(),console.log("📱 Status bar configured")}catch(e){console.warn("Failed to configure status bar:",e)}}async hideSplashScreen(){try{await g.hide(),console.log("📱 Splash screen hidden")}catch(e){console.warn("Failed to hide splash screen:",e)}}setupMobileUI(){document.body.classList.add("mobile-app"),document.body.classList.add(`platform-${this.platform}`),this.disableZoomOnInputs(),this.setupTouchOptimizations(),this.addSafeAreaSupport(),console.log("📱 Mobile UI enhancements applied")}disableZoomOnInputs(){const e=document.querySelector("meta[name=viewport]");e&&e.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"),document.querySelectorAll("input, textarea, select").forEach(e=>{e.addEventListener("focus",()=>{e.style.fontSize="16px"}),e.addEventListener("blur",()=>{e.style.fontSize=""})})}setupTouchOptimizations(){const e=document.createElement("style");e.textContent="\n            .mobile-app {\n                -webkit-tap-highlight-color: transparent;\n                -webkit-touch-callout: none;\n                -webkit-user-select: none;\n                user-select: none;\n            }\n            \n            .mobile-app button,\n            .mobile-app .btn {\n                min-height: 44px;\n                min-width: 44px;\n                touch-action: manipulation;\n            }\n            \n            .mobile-app input,\n            .mobile-app textarea {\n                -webkit-user-select: text;\n                user-select: text;\n            }\n            \n            .mobile-app .message {\n                -webkit-user-select: text;\n                user-select: text;\n            }\n            \n            /* Safe area support */\n            .mobile-app {\n                padding-top: env(safe-area-inset-top);\n                padding-bottom: env(safe-area-inset-bottom);\n                padding-left: env(safe-area-inset-left);\n                padding-right: env(safe-area-inset-right);\n            }\n            \n            /* Platform-specific adjustments */\n            .platform-ios .panel {\n                border-radius: 16px;\n            }\n            \n            .platform-android .btn {\n                border-radius: 4px;\n            }\n            \n            /* Improved touch targets */\n            .mobile-app .message-input-group button {\n                padding: 12px 16px;\n            }\n            \n            .mobile-app .voice-btn {\n                min-width: 48px;\n                min-height: 48px;\n            }\n        ",document.head.appendChild(e)}addSafeAreaSupport(){const e=document.documentElement;e.style.setProperty("--safe-area-inset-top","0px"),e.style.setProperty("--safe-area-inset-right","0px"),e.style.setProperty("--safe-area-inset-bottom","0px"),e.style.setProperty("--safe-area-inset-left","0px")}setupAppLifecycle(){document.addEventListener("visibilitychange",()=>{document.hidden?this.onAppBackground():this.onAppForeground()}),document.addEventListener("pause",()=>{this.onAppPause()}),document.addEventListener("resume",()=>{this.onAppResume()})}setupHardwareBackButton(){"android"===this.platform&&document.addEventListener("backbutton",e=>{e.preventDefault(),this.handleHardwareBackButton()})}handleHardwareBackButton(){const e=document.querySelectorAll(".modal, .overlay, .voice-recording-overlay");if(e.length>0){const t=e[e.length-1],n=t.querySelector(".close, .cancel, [data-dismiss]");return void(n?n.click():t.remove())}window.cipherWave&&window.cipherWave.isConnected?this.showExitConfirmation():this.exitApp()}showExitConfirmation(){const e=document.createElement("div");e.className="exit-confirmation modal",e.innerHTML='\n            <div class="modal-content">\n                <h3>Exit CipherWave?</h3>\n                <p>You are currently connected to a chat room. Are you sure you want to exit?</p>\n                <div class="modal-buttons">\n                    <button class="btn btn-secondary" onclick="this.closest(\'.modal\').remove()">\n                        Cancel\n                    </button>\n                    <button class="btn btn-primary" onclick="window.mobileManager.exitApp()">\n                        Exit\n                    </button>\n                </div>\n            </div>\n        ',document.body.appendChild(e),setTimeout(()=>{e.parentElement&&e.remove()},1e4)}exitApp(){window.cipherWave&&window.cipherWave.isConnected&&window.cipherWave.disconnect(),"android"===this.platform&&navigator.app?.exitApp?.()}onAppBackground(){console.log("📱 App went to background"),this.backgroundMode=!0,this.reduceBackgroundActivity()}onAppForeground(){console.log("📱 App came to foreground"),this.backgroundMode=!1,this.resumeNormalActivity()}onAppPause(){console.log("📱 App paused"),this.savePendingData()}onAppResume(){console.log("📱 App resumed"),this.restoreAppState()}reduceBackgroundActivity(){window.cipherWave&&window.cipherWave.connectionManager}resumeNormalActivity(){window.cipherWave&&window.cipherWave.connectionManager}savePendingData(){const e=document.getElementById("message-input");e&&e.value.trim()&&localStorage.setItem("cipherwave_draft_message",e.value)}restoreAppState(){const e=localStorage.getItem("cipherwave_draft_message");if(e){const t=document.getElementById("message-input");t&&(t.value=e),localStorage.removeItem("cipherwave_draft_message")}}async hapticFeedback(e="light"){if(this.isNative)try{if(window.Capacitor?.Plugins?.Haptics){const{Haptics:t,ImpactStyle:n}=window.Capacitor.Plugins,i={light:n.Light,medium:n.Medium,heavy:n.Heavy};await t.impact({style:i[e]||i.light})}}catch(t){console.warn("Haptic feedback not available:",t)}}async showToast(e,t="short"){if(this.isNative)try{if(window.Capacitor?.Plugins?.Toast){const{Toast:n}=window.Capacitor.Plugins;await n.show({text:e,duration:t})}}catch(n){console.warn("Native toast not available:",n),this.showWebToast(e)}else this.showWebToast(e)}showWebToast(e){const t=document.createElement("div");t.className="web-toast",t.textContent=e,t.style.cssText="\n            position: fixed;\n            bottom: 100px;\n            left: 50%;\n            transform: translateX(-50%);\n            background: rgba(0, 0, 0, 0.8);\n            color: white;\n            padding: 12px 24px;\n            border-radius: 25px;\n            font-size: 14px;\n            z-index: 10000;\n            animation: toastIn 0.3s ease-out;\n        ",document.body.appendChild(t),setTimeout(()=>{t.style.animation="toastOut 0.3s ease-in",setTimeout(()=>t.remove(),300)},2e3)}getDeviceInfo(){return{platform:this.platform,isNative:this.isNative,userAgent:navigator.userAgent,viewport:{width:window.innerWidth,height:window.innerHeight},pixelRatio:window.devicePixelRatio||1,language:navigator.language,online:navigator.onLine}}supportsFeature(e){return{webrtc:!!window.RTCPeerConnection,websocket:!!window.WebSocket,notifications:"Notification"in window,geolocation:"geolocation"in navigator,mediaDevices:!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia),serviceWorker:"serviceWorker"in navigator,indexedDB:"indexedDB"in window,localStorage:"localStorage"in window}[e]||!1}destroy(){document.removeEventListener("visibilitychange",this.onAppBackground),document.removeEventListener("pause",this.onAppPause),document.removeEventListener("resume",this.onAppResume),document.removeEventListener("backbutton",this.handleHardwareBackButton),document.body.classList.remove("mobile-app",`platform-${this.platform}`),this.isInitialized=!1,console.log("🗑️ Mobile manager destroyed")}}},Symbol.toStringTag,{value:"Module"}));e("m",b);const y=Object.freeze(Object.defineProperty({__proto__:null,SplashScreenWeb:class extends c{async show(e){}async hide(e){}}},Symbol.toStringTag,{value:"Module"}))}}});
//# sourceMappingURL=chunk-legacy-CnmjiQTl.js.map
