const e={},t=function(t,n,o){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),o=(null==t?void 0:t.nonce)||(null==t?void 0:t.getAttribute("nonce"));i=Promise.allSettled(n.map(t=>{if((t=function(e){return"/"+e}(t))in e)return;e[t]=!0;const n=t.endsWith(".css"),i=n?'[rel="stylesheet"]':"";if(document.querySelector('link[href="'.concat(t,'"]').concat(i)))return;const a=document.createElement("link");return a.rel=n?"stylesheet":"modulepreload",n||(a.as="script"),a.crossOrigin="",a.href=t,o&&a.setAttribute("nonce",o),document.head.appendChild(a),n?new Promise((e,n)=>{a.addEventListener("load",e),a.addEventListener("error",()=>n(new Error("Unable to preload CSS for ".concat(t))))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return i.then(e=>{for(const t of e||[])"rejected"===t.status&&a(t.reason);return t().catch(a)})},n=(e=>e.CapacitorPlatforms=(e=>{const t=new Map;t.set("web",{name:"web"});const n=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t};return n.addPlatform=(e,t)=>{n.platforms.set(e,t)},n.setPlatform=e=>{n.platforms.has(e)&&(n.currentPlatform=n.platforms.get(e))},n})(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:{});var o,i;n.addPlatform,n.setPlatform,(i=o||(o={})).Unimplemented="UNIMPLEMENTED",i.Unavailable="UNAVAILABLE";class a extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const s=e=>{var t,n,i,s,r;const c=e.CapacitorCustomPlatform||null,l=e.Capacitor||{},d=l.Plugins=l.Plugins||{},u=e.CapacitorPlatforms,p=(null===(t=null==u?void 0:u.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==c?c.name:(e=>{var t,n;return(null==e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e)),m=(null===(n=null==u?void 0:u.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||(()=>"web"!==p()),h=(null===(i=null==u?void 0:u.currentPlatform)||void 0===i?void 0:i.isPluginAvailable)||(e=>{const t=v.get(e);return!!(null==t?void 0:t.platforms.has(p()))||!!g(e)}),g=(null===(s=null==u?void 0:u.currentPlatform)||void 0===s?void 0:s.getPluginHeader)||(e=>{var t;return null===(t=l.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)}),v=new Map,w=(null===(r=null==u?void 0:u.currentPlatform)||void 0===r?void 0:r.registerPlugin)||((e,t={})=>{const n=v.get(e);if(n)return console.warn('Capacitor plugin "'.concat(e,'" already registered. Cannot register plugins twice.')),n.proxy;const i=p(),s=g(e);let r;const u=n=>{let d;const u=(...u)=>{const p=(async()=>(!r&&i in t?r=r="function"==typeof t[i]?await t[i]():t[i]:null!==c&&!r&&"web"in t&&(r=r="function"==typeof t.web?await t.web():t.web),r))().then(t=>{const r=((t,n)=>{var r,c;if(!s){if(t)return null===(c=t[n])||void 0===c?void 0:c.bind(t);throw new a('"'.concat(e,'" plugin is not implemented on ').concat(i),o.Unimplemented)}{const o=null==s?void 0:s.methods.find(e=>n===e.name);if(o)return"promise"===o.rtype?t=>l.nativePromise(e,n.toString(),t):(t,o)=>l.nativeCallback(e,n.toString(),t,o);if(t)return null===(r=t[n])||void 0===r?void 0:r.bind(t)}})(t,n);if(r){const e=r(...u);return d=null==e?void 0:e.remove,e}throw new a('"'.concat(e,".").concat(n,'()" is not implemented on ').concat(i),o.Unimplemented)});return"addListener"===n&&(p.remove=async()=>d()),p};return u.toString=()=>"".concat(n.toString(),"() { [capacitor code] }"),Object.defineProperty(u,"name",{value:n,writable:!1,configurable:!1}),u},m=u("addListener"),h=u("removeListener"),w=(e,t)=>{const n=m({eventName:e},t),o=async()=>{const o=await n;h({eventName:e,callbackId:o},t)},i=new Promise(e=>n.then(()=>e({remove:o})));return i.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await o()},i},f=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return s?w:m;case"removeListener":return h;default:return u(t)}}});return d[e]=f,v.set(e,{name:e,proxy:f,platforms:new Set([...Object.keys(t),...s?[i]:[]])}),f});return l.convertFileSrc||(l.convertFileSrc=e=>e),l.getPlatform=p,l.handleError=t=>e.console.error(t),l.isNativePlatform=m,l.isPluginAvailable=h,l.pluginMethodNoop=(e,t,n)=>Promise.reject("".concat(n,' does not have an implementation of "').concat(t,'".')),l.registerPlugin=w,l.Exception=a,l.DEBUG=!!l.DEBUG,l.isLoggingEnabled=!!l.isLoggingEnabled,l.platform=l.getPlatform(),l.isNative=l.isNativePlatform(),l},r=(e=>e.Capacitor=s(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:{}),c=r.registerPlugin;r.Plugins;class l{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn('Capacitor WebPlugin "'.concat(e.name,'" config object was deprecated in v3 and will be removed in v4.')),this.config=e)}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),n&&this.sendRetainedArgumentsForEvent(e);return Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const o=this.listeners[e];if(o)o.forEach(e=>e(t));else if(n){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new r.Exception(e,o.Unimplemented)}unavailable(e="not available"){return new r.Exception(e,o.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const o=n.indexOf(t);this.listeners[e].splice(o,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}const d=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),u=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class p extends l{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[n,o]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=u(n).trim(),o=u(o).trim(),t[n]=o}),t}async setCookie(e){try{const t=d(e.key),n=d(e.value),o="; expires=".concat((e.expires||"").replace("expires=","")),i=(e.path||"/").replace("path=",""),a=null!=e.url&&e.url.length>0?"domain=".concat(e.url):"";document.cookie="".concat(t,"=").concat(n||"").concat(o,"; path=").concat(i,"; ").concat(a,";")}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie="".concat(e.key,"=; Max-Age=0")}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,"=;expires=".concat((new Date).toUTCString(),";path=/"))}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}c("CapacitorCookies",{web:()=>new p});const m=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),o=((e={})=>{const t=Object.keys(e);return Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((n,o,i)=>(n[o]=e[t[i]],n),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)n.body=e.data;else if(o.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[n,o]of Object.entries(e.data||{}))t.set(n,o);n.body=t.toString()}else if(o.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,n)=>{t.append(n,e)});else for(const n of Object.keys(e.data))t.append(n,e.data[n]);n.body=t;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(o.includes("application/json")||"object"==typeof e.data)&&(n.body=JSON.stringify(e.data));return n};class h extends l{async request(e){const t=m(e,e.webFetchExtra),n=((e,t=!0)=>e?Object.entries(e).reduce((e,n)=>{const[o,i]=n;let a,s;return Array.isArray(i)?(s="",i.forEach(e=>{a=t?encodeURIComponent(e):e,s+="".concat(o,"=").concat(a,"&")}),s.slice(0,-1)):(a=t?encodeURIComponent(i):i,s="".concat(o,"=").concat(a)),"".concat(e,"&").concat(s)},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),o=n?"".concat(e.url,"?").concat(n):e.url,i=await fetch(o,t),a=i.headers.get("content-type")||"";let s,r,{responseType:c="text"}=i.ok?e:{};switch(a.includes("application/json")&&(c="json"),c){case"arraybuffer":case"blob":r=await i.blob(),s=await(async e=>new Promise((t,n)=>{const o=new FileReader;o.onload=()=>{const e=o.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},o.onerror=e=>n(e),o.readAsDataURL(e)}))(r);break;case"json":s=await i.json();break;default:s=await i.text()}const l={};return i.headers.forEach((e,t)=>{l[t]=e}),{data:s,headers:l,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}c("CapacitorHttp",{web:()=>new h});const g=c("SplashScreen",{web:()=>t(()=>Promise.resolve().then(()=>P),void 0).then(e=>new e.SplashScreenWeb)});var v,w,f,b;(w=v||(v={})).Dark="DARK",w.Light="LIGHT",w.Default="DEFAULT",(b=f||(f={})).None="NONE",b.Slide="SLIDE",b.Fade="FADE";const y=c("StatusBar");window.mobileManager=null;const E=Object.freeze(Object.defineProperty({__proto__:null,MobileManager:class{constructor(){this.platform=r.getPlatform(),this.isNative=r.isNativePlatform(),this.isInitialized=!1,this.backgroundMode=!1,this.pushNotifications=!1,this.hapticFeedback=!1,console.log("📱 Mobile manager initialized for platform: ".concat(this.platform))}async initialize(){if(this.isNative){console.log("📱 Initializing mobile features...");try{await this.configureStatusBar(),await this.hideSplashScreen(),this.setupMobileUI(),this.setupAppLifecycle(),this.setupHardwareBackButton(),this.isInitialized=!0,console.log("✅ Mobile features initialized")}catch(e){throw console.error("❌ Failed to initialize mobile features:",e),e}}else console.log("📱 Running in web mode, skipping native features")}async configureStatusBar(){try{await y.setStyle({style:v.Dark}),await y.setBackgroundColor({color:"#0f1419"}),await y.show(),console.log("📱 Status bar configured")}catch(e){console.warn("Failed to configure status bar:",e)}}async hideSplashScreen(){try{await g.hide(),console.log("📱 Splash screen hidden")}catch(e){console.warn("Failed to hide splash screen:",e)}}setupMobileUI(){document.body.classList.add("mobile-app"),document.body.classList.add("platform-".concat(this.platform)),this.disableZoomOnInputs(),this.setupTouchOptimizations(),this.addSafeAreaSupport(),console.log("📱 Mobile UI enhancements applied")}disableZoomOnInputs(){const e=document.querySelector("meta[name=viewport]");e&&e.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no");document.querySelectorAll("input, textarea, select").forEach(e=>{e.addEventListener("focus",()=>{e.style.fontSize="16px"}),e.addEventListener("blur",()=>{e.style.fontSize=""})})}setupTouchOptimizations(){const e=document.createElement("style");e.textContent="\n            .mobile-app {\n                -webkit-tap-highlight-color: transparent;\n                -webkit-touch-callout: none;\n                -webkit-user-select: none;\n                user-select: none;\n            }\n            \n            .mobile-app button,\n            .mobile-app .btn {\n                min-height: 44px;\n                min-width: 44px;\n                touch-action: manipulation;\n            }\n            \n            .mobile-app input,\n            .mobile-app textarea {\n                -webkit-user-select: text;\n                user-select: text;\n            }\n            \n            .mobile-app .message {\n                -webkit-user-select: text;\n                user-select: text;\n            }\n            \n            /* Safe area support */\n            .mobile-app {\n                padding-top: env(safe-area-inset-top);\n                padding-bottom: env(safe-area-inset-bottom);\n                padding-left: env(safe-area-inset-left);\n                padding-right: env(safe-area-inset-right);\n            }\n            \n            /* Platform-specific adjustments */\n            .platform-ios .panel {\n                border-radius: 16px;\n            }\n            \n            .platform-android .btn {\n                border-radius: 4px;\n            }\n            \n            /* Improved touch targets */\n            .mobile-app .message-input-group button {\n                padding: 12px 16px;\n            }\n            \n            .mobile-app .voice-btn {\n                min-width: 48px;\n                min-height: 48px;\n            }\n        ",document.head.appendChild(e)}addSafeAreaSupport(){const e=document.documentElement;e.style.setProperty("--safe-area-inset-top","0px"),e.style.setProperty("--safe-area-inset-right","0px"),e.style.setProperty("--safe-area-inset-bottom","0px"),e.style.setProperty("--safe-area-inset-left","0px")}setupAppLifecycle(){document.addEventListener("visibilitychange",()=>{document.hidden?this.onAppBackground():this.onAppForeground()}),document.addEventListener("pause",()=>{this.onAppPause()}),document.addEventListener("resume",()=>{this.onAppResume()})}setupHardwareBackButton(){"android"===this.platform&&document.addEventListener("backbutton",e=>{e.preventDefault(),this.handleHardwareBackButton()})}handleHardwareBackButton(){const e=document.querySelectorAll(".modal, .overlay, .voice-recording-overlay");if(e.length>0){const t=e[e.length-1],n=t.querySelector(".close, .cancel, [data-dismiss]");return void(n?n.click():t.remove())}window.cipherWave&&window.cipherWave.isConnected?this.showExitConfirmation():this.exitApp()}showExitConfirmation(){const e=document.createElement("div");e.className="exit-confirmation modal",e.innerHTML='\n            <div class="modal-content">\n                <h3>Exit CipherWave?</h3>\n                <p>You are currently connected to a chat room. Are you sure you want to exit?</p>\n                <div class="modal-buttons">\n                    <button class="btn btn-secondary" onclick="this.closest(\'.modal\').remove()">\n                        Cancel\n                    </button>\n                    <button class="btn btn-primary" onclick="window.mobileManager.exitApp()">\n                        Exit\n                    </button>\n                </div>\n            </div>\n        ',document.body.appendChild(e),setTimeout(()=>{e.parentElement&&e.remove()},1e4)}exitApp(){var e,t;window.cipherWave&&window.cipherWave.isConnected&&window.cipherWave.disconnect(),"android"===this.platform&&(null==(t=null==(e=navigator.app)?void 0:e.exitApp)||t.call(e))}onAppBackground(){console.log("📱 App went to background"),this.backgroundMode=!0,this.reduceBackgroundActivity()}onAppForeground(){console.log("📱 App came to foreground"),this.backgroundMode=!1,this.resumeNormalActivity()}onAppPause(){console.log("📱 App paused"),this.savePendingData()}onAppResume(){console.log("📱 App resumed"),this.restoreAppState()}reduceBackgroundActivity(){window.cipherWave&&window.cipherWave.connectionManager}resumeNormalActivity(){window.cipherWave&&window.cipherWave.connectionManager}savePendingData(){const e=document.getElementById("message-input");e&&e.value.trim()&&localStorage.setItem("cipherwave_draft_message",e.value)}restoreAppState(){const e=localStorage.getItem("cipherwave_draft_message");if(e){const t=document.getElementById("message-input");t&&(t.value=e),localStorage.removeItem("cipherwave_draft_message")}}async hapticFeedback(e="light"){var t,n;if(this.isNative)try{if(null==(n=null==(t=window.Capacitor)?void 0:t.Plugins)?void 0:n.Haptics){const{Haptics:t,ImpactStyle:n}=window.Capacitor.Plugins,o={light:n.Light,medium:n.Medium,heavy:n.Heavy};await t.impact({style:o[e]||o.light})}}catch(o){console.warn("Haptic feedback not available:",o)}}async showToast(e,t="short"){var n,o;if(this.isNative)try{if(null==(o=null==(n=window.Capacitor)?void 0:n.Plugins)?void 0:o.Toast){const{Toast:n}=window.Capacitor.Plugins;await n.show({text:e,duration:t})}}catch(i){console.warn("Native toast not available:",i),this.showWebToast(e)}else this.showWebToast(e)}showWebToast(e){const t=document.createElement("div");t.className="web-toast",t.textContent=e,t.style.cssText="\n            position: fixed;\n            bottom: 100px;\n            left: 50%;\n            transform: translateX(-50%);\n            background: rgba(0, 0, 0, 0.8);\n            color: white;\n            padding: 12px 24px;\n            border-radius: 25px;\n            font-size: 14px;\n            z-index: 10000;\n            animation: toastIn 0.3s ease-out;\n        ",document.body.appendChild(t),setTimeout(()=>{t.style.animation="toastOut 0.3s ease-in",setTimeout(()=>t.remove(),300)},2e3)}getDeviceInfo(){return{platform:this.platform,isNative:this.isNative,userAgent:navigator.userAgent,viewport:{width:window.innerWidth,height:window.innerHeight},pixelRatio:window.devicePixelRatio||1,language:navigator.language,online:navigator.onLine}}supportsFeature(e){return{webrtc:!!window.RTCPeerConnection,websocket:!!window.WebSocket,notifications:"Notification"in window,geolocation:"geolocation"in navigator,mediaDevices:!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia),serviceWorker:"serviceWorker"in navigator,indexedDB:"indexedDB"in window,localStorage:"localStorage"in window}[e]||!1}destroy(){document.removeEventListener("visibilitychange",this.onAppBackground),document.removeEventListener("pause",this.onAppPause),document.removeEventListener("resume",this.onAppResume),document.removeEventListener("backbutton",this.handleHardwareBackButton),document.body.classList.remove("mobile-app","platform-".concat(this.platform)),this.isInitialized=!1,console.log("🗑️ Mobile manager destroyed")}}},Symbol.toStringTag,{value:"Module"}));const P=Object.freeze(Object.defineProperty({__proto__:null,SplashScreenWeb:class extends l{async show(e){}async hide(e){}}},Symbol.toStringTag,{value:"Module"}));export{t as _,E as m};
//# sourceMappingURL=chunk-CGihlwpU.js.map
